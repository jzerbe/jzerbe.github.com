--- 
layout: post
title: OpenVZ on Debian Etch
tags: 
- debian
- Linux
- openvz
- Server
status: publish
type: post
published: true
meta: 
  _edit_last: "1"
---
OpenVZ setup procedure followed - January 5th, 2009
host machine - 1.5ghz, 1GB ram, 40GB hard disk drive
host os - Debian 4.0
kernel image - etchnhalf
for more detailed information see: <a href="http://download.openvz.org/doc/OpenVZ-Users-Guide.pdf">http://download.openvz.org/doc/OpenVZ-Users-Guide.pdf</a>
for more information on symbolic linking see: <a href="http://www.ss64.com/bash/ln.html">http://www.ss64.com/bash/ln.html</a>

These instructions are for setting up an OpenVZ system on Debian 4.0 (Etch) with browser-based administration via Webmin. I couldn't get the OpenVZ plugin for Webmin working, but maybe you can. This cookbook assumes running knowledge of how to <a href="http://www.yolinux.com/TUTORIALS/LinuxTutorialAdvanced_vi.html">edit configuration files via "vi"</a>, <a href="http://www.debian.org/doc/manuals/apt-howto/">using apt-get</a> to install dependencies/software, and <a href="http://ubuntuforums.org/showthread.php?t=244832">how to install via tarballs (.tar.gz)</a>.
<ol>
	<li>Install latest Debian distro (Etch at the time of authoring) on your physical server. You can get the netinstall (what I used) here: <a href="http://www.debian.org/distrib/netinst">http://www.debian.org/distrib/netinst</a>. Partition setup note: 5-7GB for root filesystem, 1.25X-2X size of RAM for swap, rest of space for /var/lib/vz (for OpenVZ VPS nodes).</li>
	<li> Once installed, configure static ipv4/ipv6 address(es) on interfaces (/etc/network/interfaces) and nameservers in the /etc/resolv.conf file.</li>
	<li>Modify apt-get sources if incorrect and add line "deb http://download.openvz.org/debian-systs etch openvz"</li>
	<li>Run command to update apt-get with new openvz repository: wget -q http://download.openvz.org/debian-systs/dso_archiv_signing_key.asc -O- | apt-key add - &amp;&amp; apt-get update</li>
	<li>apt-get install ssh (so we don't have to sit in front of the server rack anymore)</li>
	<li> apt-get upgrade (update to the newest software versions)</li>
	<li> You might need to execute "shutdown -r now" if debian installed a new kernel and/or other critical operating system feature.</li>
	<li> Now we can get to the good stuff. It's time to install the OpenVZ kernel: <a href="http://wiki.openvz.org/Installation_on_Debian#Kernel_installation">http://wiki.openvz.org/Installation_on_Debian#Kernel_installation</a></li>
	<li>After installing the OpenVZ kernel and rebooting into your new OpenVZ kernel based system (and making sure you have all the OpenVZ shiz running properly), we can now install some webmin dependancies: apt-get install perl libnet-ssleay-perl openssl libauthen-pam-perl libpam-runtime libio-pty-perl libmd5-perl</li>
	<li>I suggest running the webmin minimal install - http://webmin.com/tgz.html</li>
	<li>install openvz webmin module - <a href="http://www.provider4u.de/openvz.tar.gz">http://www.provider4u.de/openvz.tar.gz</a></li>
	<li>install various openvz os templates to /var/lib/vz/template/cache from: <a href="http://download.openvz.org/contrib/template/precreated/">http://download.openvz.org/contrib/template/precreated/</a></li>
</ol>

